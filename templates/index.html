{% extends "base.html" %}

{% block content %}
<div class="tasks-header">
    <h2>Mes TÃ¢ches ({{ tasks|length }})</h2>
    <div class="actions">
        <a href="{{ url_for('sync_emails') }}" class="btn btn-primary">ğŸ”„ Sync Emails</a>
        <a href="{{ url_for('add_task_manual') }}" class="btn btn-secondary">â• Ajouter Manuellement</a>
    </div>
</div>

{% if tasks %}
<div class="tasks-grid">
    {% for task in tasks %}
    <div class="task-card priority-{{ task.priorite }}">
        <div class="task-header">
            <h3>{{ task.tache }}</h3>
            <span class="priority-badge">{{ task.priorite }}</span>
        </div>
        
        <div class="task-details">
            {% if task.deadline %}
            <p><strong>ğŸ“… Deadline:</strong> {{ task.deadline }}</p>
            {% endif %}
            
            {% if task.info %}
            <p><strong>â„¹ï¸ Info:</strong> {{ task.info }}</p>
            {% endif %}
            
            <p><small>CrÃ©Ã© le: {{ task.created_at }}</small></p>
        </div>
        
        <div class="task-actions">
            <a href="{{ url_for('mark_task_done_route', task_id=task.id) }}" 
               class="btn btn-success" 
               onclick="return confirm('Marquer comme terminÃ©e?')">
                âœ“ Terminer
            </a>
            <a href="{{ url_for('delete_task_route', task_id=task.id) }}" 
               class="btn btn-danger" 
               onclick="return confirm('Supprimer cette tÃ¢che?')">
                âœ— Supprimer
            </a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <h3>ğŸ‰ Aucune tÃ¢che en cours!</h3>
    <p>Commencez par synchroniser vos emails ou ajoutez une tÃ¢che manuellement.</p>
    <div class="empty-actions">
        <a href="{{ url_for('sync_emails') }}" class="btn btn-primary">ğŸ”„ Synchroniser</a>
        <a href="{{ url_for('add_task_manual') }}" class="btn btn-secondary">â• Ajouter TÃ¢che</a>
    </div>
</div>
{% endif %}
{% endblock %}